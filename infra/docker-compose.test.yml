# Docker compose for E2E testing - Frontend only, uses production backend
services:
  frontend:
    build:
      context: ../frontend
      dockerfile: ../infra/docker/frontend.Dockerfile
    command: pnpm dev --port 3000 --hostname 0.0.0.0
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_API_BASE_URL=https://endpoints.chatorbit.com
      - NEXT_PUBLIC_WS_BASE_URL=wss://endpoints.chatorbit.com
      - NEXT_PUBLIC_WEBRTC_STUN_URLS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
      - NEXT_PUBLIC_WEBRTC_TURN_URLS=turn:turn.i0i0i0.com:5349?transport=udp
      - NEXT_PUBLIC_WEBRTC_TURN_USER=pakalolo
      - NEXT_PUBLIC_WEBRTC_TURN_PASSWORD=PECKO2025
    ports:
      - "3003:3000"
    restart: unless-stopped
    volumes:
      - ../frontend:/app
      - /app/node_modules
      - /app/.next
